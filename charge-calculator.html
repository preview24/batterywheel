<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ebike Charging Cost Calculator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .evcalc1_calculator {
        background-color: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        width: 100%;
        max-width: 400px;
    }
    h1 {
        font-size: 22px;
        text-align: center;
        margin-bottom: 20px;
    }
    label {
        font-size: 15px;
        margin-bottom: 6px;
        display: block;
    }
    input[type="number"], input[type="range"], select {
        width: 100%;
        padding: 8px;
        font-size: 14px;
        margin-bottom: 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
        box-sizing: border-box;
    }
    .range-labels {
        display: flex;
        justify-content: space-between;
    }
    .error-message {
        color: red;
        font-size: 12px;
        display: none;
        margin-top: 3px;
    }
    .result {
        font-size: 18px;
        font-weight: bold;
        text-align: center;
        margin-top: 20px;
    }
    .calculate-button {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    .calculate-button:hover {
        background-color: #45a049;
    }
</style>
</head>

<body>



<div class="evcalc1_calculator">
    <h1>Ebike Charging Cost Calculator</h1>

    <label for="evcalc1_battery">Battery Capacity:</label>
    <div>
        <input type="number" id="evcalc1_battery" placeholder="e.g. 0.48" step="0.01">
        <select id="evcalc1_unit">
            <option value="kWh">kWh</option>
            <option value="Ah">Ah</option>
        </select>
    </div>
    <div class="error-message" id="evcalc1_capacity_error">Please enter a valid battery capacity.</div>

    <label for="evcalc1_cost">Electricity Cost (per kWh, in $):</label>
    <input type="number" id="evcalc1_cost" placeholder="e.g. 0.12" step="0.01">
    <div class="error-message" id="evcalc1_cost_error">Please enter a valid electricity cost.</div>

    <label for="evcalc1_charge">Current Charge Level (%):</label>
    <input type="range" id="evcalc1_charge" min="0" max="100" value="0">
    <div class="range-labels">
        <span>0%</span><span>100%</span>
    </div>
    <div id="evcalc1_display">0%</div>

    <button class="calculate-button" id="evcalc1_btn">Calculate Cost</button>

    <div class="result" id="evcalc1_result">Charging Cost: $0.00</div>
</div>



<script>
(function() {
    const id = "evcalc1_";

    const batteryInput = document.getElementById(id + "battery");
    const costInput = document.getElementById(id + "cost");
    const unitSelect = document.getElementById(id + "unit");
    const chargeSlider = document.getElementById(id + "charge");
    const display = document.getElementById(id + "display");
    const capacityError = document.getElementById(id + "capacity_error");
    const costError = document.getElementById(id + "cost_error");
    const result = document.getElementById(id + "result");
    const button = document.getElementById(id + "btn");

    // Allow only numbers
    [batteryInput, costInput].forEach(input => {
        input.addEventListener("input", e => {
            e.target.value = e.target.value.replace(/[^0-9.]/g, '');
        });
    });

    // Live update charge %
    chargeSlider.addEventListener("input", () => {
        display.textContent = chargeSlider.value + "%";
    });

    // Calculate button click
    button.addEventListener("click", () => {
        const battery = parseFloat(batteryInput.value);
        const cost = parseFloat(costInput.value);
        const unit = unitSelect.value;
        const charge = parseInt(chargeSlider.value);

        capacityError.style.display = "none";
        costError.style.display = "none";

        if (isNaN(battery) || battery <= 0) {
            capacityError.style.display = "block";
            return;
        }
        if (isNaN(cost) || cost <= 0) {
            costError.style.display = "block";
            return;
        }

        // Convert Ah to kWh if necessary
        let batteryKWh = battery;
        if (unit === "Ah") {
            const voltage = 36; // Standard ebike voltage
            batteryKWh = (battery * voltage) / 1000;
        }

        // Correct logic: more current charge => less cost
        const requiredCharge = batteryKWh * (100 - charge) / 100;
        const totalCost = requiredCharge * cost;

        result.textContent = `Charging Cost: $${totalCost.toFixed(2)}`;
    });
})();
</script>
</body>
</html>
